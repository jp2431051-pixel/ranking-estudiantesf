const a0_0x26773a=a0_0x4b03;function a0_0x4b03(_0x533d73,_0x4ba4a8){const _0x35ffc5=a0_0x35ff();return a0_0x4b03=function(_0x4b03dc,_0x34c05d){_0x4b03dc=_0x4b03dc-0xed;let _0x565ddf=_0x35ffc5[_0x4b03dc];return _0x565ddf;},a0_0x4b03(_0x533d73,_0x4ba4a8);}(function(_0x307abd,_0x54ff21){const _0x483601=a0_0x4b03,_0x327de9=_0x307abd();while(!![]){try{const _0x4e07bf=-parseInt(_0x483601(0x11b))/0x1+-parseInt(_0x483601(0x130))/0x2+-parseInt(_0x483601(0x10d))/0x3*(parseInt(_0x483601(0x139))/0x4)+parseInt(_0x483601(0x119))/0x5*(-parseInt(_0x483601(0x138))/0x6)+parseInt(_0x483601(0x10e))/0x7*(-parseInt(_0x483601(0x128))/0x8)+parseInt(_0x483601(0x106))/0x9+parseInt(_0x483601(0x13b))/0xa*(parseInt(_0x483601(0x122))/0xb);if(_0x4e07bf===_0x54ff21)break;else _0x327de9['push'](_0x327de9['shift']());}catch(_0x524da2){_0x327de9['push'](_0x327de9['shift']());}}}(a0_0x35ff,0x8d2b1));const API_URL=a0_0x26773a(0x11c);let allStudents=[];async function loadStudents(){const _0x21dcc1=a0_0x26773a,_0x558a42=await fetch(API_URL),_0x27d43a=await _0x558a42[_0x21dcc1(0xef)]();allStudents=_0x27d43a,showTop3ByGender(_0x27d43a);}function showTop3ByGender(_0x37ad8f){const _0x48ac0b=a0_0x26773a,_0x5aed0a=_0x37ad8f[_0x48ac0b(0xf9)](_0x38f191=>_0x38f191[_0x48ac0b(0x114)][_0x48ac0b(0x110)]()===_0x48ac0b(0x104)&&_0x38f191['ratingCount']>0x0)[_0x48ac0b(0x101)]((_0x59bbdf,_0x1d56a8)=>{const _0x335689=_0x48ac0b,_0x4b04f4=_0x59bbdf[_0x335689(0xf7)]/_0x59bbdf[_0x335689(0x148)],_0x2bf748=_0x1d56a8[_0x335689(0xf7)]/_0x1d56a8[_0x335689(0x148)];return _0x2bf748-_0x4b04f4;})[_0x48ac0b(0x149)](0x0,0x3),_0x3d252a=_0x37ad8f[_0x48ac0b(0xf9)](_0x1fdb50=>_0x1fdb50[_0x48ac0b(0x114)]['toLowerCase']()===_0x48ac0b(0x12c)&&_0x1fdb50['ratingCount']>0x0)[_0x48ac0b(0x101)]((_0x586fa8,_0x17d7f0)=>{const _0x18a713=_0x48ac0b,_0xdcd7ea=_0x586fa8[_0x18a713(0xf7)]/_0x586fa8[_0x18a713(0x148)],_0x410cb6=_0x17d7f0[_0x18a713(0xf7)]/_0x17d7f0['ratingCount'];return _0x410cb6-_0xdcd7ea;})['slice'](0x0,0x3),_0x2d993b=document[_0x48ac0b(0x13a)](_0x48ac0b(0x125)),_0x1d7601=document[_0x48ac0b(0x13a)](_0x48ac0b(0x109));_0x2d993b[_0x48ac0b(0x126)]=_0x5aed0a[_0x48ac0b(0x12f)]===0x0?'<p>No\x20hay\x20hombres\x20con\x20votos\x20aún.</p>':'',_0x1d7601[_0x48ac0b(0x126)]=_0x3d252a[_0x48ac0b(0x12f)]===0x0?_0x48ac0b(0x146):'';if(_0x5aed0a[_0x48ac0b(0x12f)]>0x0)displayStudents(_0x5aed0a,_0x48ac0b(0x125));if(_0x3d252a['length']>0x0)displayStudents(_0x3d252a,_0x48ac0b(0x109));}function a0_0x35ff(){const _0x7a45a0=['\x22>\x0a\x20\x20','594fFQkki','259imDdKi','add','toLowerCase','application/json','keypress','dataset','gender','group','lastGlobalVote','replace','querySelectorAll','35eNGwMA','.stars','852224bOKcLh','https://ranking-estudiantesb.onrender.com/api/students','value','tagName','<span\x20class=\x22star\x22\x20data-score=\x22','filteredResults','addEventListener','3506789cLpgQT','now','filterName','topMen','innerHTML','every','137048CVAhML','Seleccionaste\x20','\x20-\x20Grupo:\x20','\x0a</div>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22vote-count\x22>','mujer','some','name','length','132142bSwRKd','click','classList','reload','votedStudentId','target','\x20minuto(s)\x20para\x20volver\x20a\x20votar.','\x20ve','313626koDhCM','9284oBVxjn','getElementById','70UrOjkT','normalize','random','find','grade','.\x20Espera\x20','este\x20estudiante','card','ceil','score','toString','<p>No\x20hay\x20mujeres\x20con\x20votos\x20aún.</p>','\x20se\x20ha','ratingCount','slice','\x0a\x20\x20\x20\x20\x20\x20<h3>','NFD','json','className','\x22>&#9733;</span>','key','_id','join','\x20votado\x20por\x20este\x20estudiante</p>\x0a\x0a\x20\x20\x20\x20','setItem','ratingSum','DOMContentLoaded','filter','getItem','career','stringify','<p>No\x20se\x20encontraron\x20estudiantes.</p>','Por\x20favor\x20escribe\x20al\x20menos\x20nombre\x20y\x20apellido\x20para\x20realizar\x20la\x20búsqueda.','forEach','trim','sort','appendChild','split','hombre','filled','6518061WuBKrL','La\x20primera\x20palabra\x20debe\x20tener\x20al\x20menos\x203\x20caracteres.','remove','topWomen','SPAN','map'];a0_0x35ff=function(){return _0x7a45a0;};return a0_0x35ff();}function displayStudents(_0x2ee7e5,_0x3c2a10){const _0x5da932=a0_0x26773a,_0x44392c=document[_0x5da932(0x13a)](_0x3c2a10);_0x44392c['innerHTML']='',_0x2ee7e5[_0x5da932(0xff)](_0x388e9d=>{const _0x430ffc=_0x5da932,_0x4b2b27=(_0x388e9d['ratingSum']/_0x388e9d[_0x430ffc(0x148)]||0x0)['toFixed'](0x2),_0x4d6fd9=document['createElement']('div');_0x4d6fd9[_0x430ffc(0xf0)]=_0x430ffc(0x142),_0x4d6fd9['innerHTML']=_0x430ffc(0xed)+_0x388e9d[_0x430ffc(0x12e)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20<p>Carrera:\x20'+_0x388e9d[_0x430ffc(0xfb)]+_0x430ffc(0x12a)+_0x388e9d[_0x430ffc(0x13f)]+_0x388e9d[_0x430ffc(0x115)]+'</p>\x0a\x20\x20\x20\x20\x20\x20<p>Promedio:\x20'+_0x4b2b27+'\x20⭐</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22rating-hint\x22>⭐\x20Selecciona\x20la\x20cantidad\x20de\x20estrellas\x20para\x20calificar</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22stars\x22\x20data-id=\x22'+_0x388e9d[_0x430ffc(0xf3)]+_0x430ffc(0x10c)+[0x1,0x2,0x3,0x4,0x5]['map'](_0x4b61ae=>_0x430ffc(0x11f)+_0x4b61ae+_0x430ffc(0xf1))[_0x430ffc(0xf4)]('')+_0x430ffc(0x12b)+_0x388e9d['ratingCount']+_0x430ffc(0x137)+(_0x388e9d['ratingCount']===0x1?'z':'ces')+_0x430ffc(0x147)+(_0x388e9d[_0x430ffc(0x148)]===0x1?'':'n')+_0x430ffc(0xf5),_0x44392c[_0x430ffc(0x102)](_0x4d6fd9);}),_0x44392c[_0x5da932(0x118)](_0x5da932(0x11a))[_0x5da932(0xff)](_0x1f68df=>{const _0x218445=_0x5da932;_0x1f68df[_0x218445(0x121)](_0x218445(0x131),_0x302a7c=>{const _0x19b025=_0x218445;if(_0x302a7c['target'][_0x19b025(0x11e)]===_0x19b025(0x10a)){const _0x2665d0=parseInt(_0x302a7c[_0x19b025(0x135)][_0x19b025(0x113)][_0x19b025(0x144)]),_0x426acd=_0x1f68df[_0x19b025(0x113)]['id'],_0xd17d8=_0x1f68df['querySelectorAll']('.star');_0xd17d8[_0x19b025(0xff)](_0x469589=>{const _0x45743c=_0x19b025,_0x292960=parseInt(_0x469589[_0x45743c(0x113)][_0x45743c(0x144)]);_0x292960<=_0x2665d0?_0x469589[_0x45743c(0x132)][_0x45743c(0x10f)]('filled'):_0x469589[_0x45743c(0x132)][_0x45743c(0x108)](_0x45743c(0x105));}),setTimeout(()=>{const _0x511c7b=_0x19b025;confirm(_0x511c7b(0x129)+_0x2665d0+'\x20estrella'+(_0x2665d0>0x1?'s':'')+'.\x20¿Deseas\x20enviar\x20la\x20calificación?')&&rateStudent(_0x426acd,_0x2665d0);},0x64);}});});}async function rateStudent(_0x3a64a1,_0x4e18d5){const _0x2cff98=a0_0x26773a,_0x4d9cd3=Date[_0x2cff98(0x123)](),_0x29abce=_0x2cff98(0x116),_0x52250e=_0x2cff98(0x134),_0x413e9c=localStorage['getItem'](_0x29abce),_0x6921a2=localStorage[_0x2cff98(0xfa)](_0x52250e),_0x2a7eb3=allStudents[_0x2cff98(0x13e)](_0x5b1e1a=>_0x5b1e1a['_id']===_0x6921a2),_0x40d57e=_0x2a7eb3?_0x2a7eb3[_0x2cff98(0x12e)]:_0x2cff98(0x141);if(_0x413e9c&&_0x4d9cd3-parseInt(_0x413e9c)<0x3c*0x3c*0x3e8){const _0x57a180=Math[_0x2cff98(0x143)]((0x3c*0x3c*0x3e8-(_0x4d9cd3-parseInt(_0x413e9c)))/0xea60);alert('Ya\x20votaste\x20por\x20'+_0x40d57e+_0x2cff98(0x140)+_0x57a180+_0x2cff98(0x136));return;}localStorage[_0x2cff98(0xf6)](_0x29abce,_0x4d9cd3[_0x2cff98(0x145)]()),localStorage[_0x2cff98(0xf6)](_0x52250e,_0x3a64a1),await fetch(API_URL+'/'+_0x3a64a1+'/rate',{'method':'POST','headers':{'Content-Type':_0x2cff98(0x111)},'body':JSON[_0x2cff98(0xfc)]({'rating':_0x4e18d5})}),location[_0x2cff98(0x133)]();}function shuffleArray(_0x557d05){const _0x1d1c9b=a0_0x26773a;return _0x557d05[_0x1d1c9b(0x10b)](_0xb62ccb=>({'value':_0xb62ccb,'sort':Math[_0x1d1c9b(0x13d)]()}))[_0x1d1c9b(0x101)]((_0x18284c,_0x1aa7e0)=>_0x18284c[_0x1d1c9b(0x101)]-_0x1aa7e0['sort'])[_0x1d1c9b(0x10b)](({value:_0x250121})=>_0x250121);}function normalizeString(_0x351852){const _0x18f08a=a0_0x26773a;return _0x351852[_0x18f08a(0x13c)](_0x18f08a(0xee))[_0x18f08a(0x117)](/[\u0300-\u036f]/g,'')[_0x18f08a(0x110)]();}function applyFilters(){const _0x3917f7=a0_0x26773a,_0x2651cf=document['getElementById'](_0x3917f7(0x124))['value'][_0x3917f7(0x100)](),_0x4a20a7=_0x2651cf[_0x3917f7(0x103)](/\s+/)[_0x3917f7(0xf9)](_0x44c44f=>_0x44c44f[_0x3917f7(0x12f)]>0x0);if(_0x4a20a7[_0x3917f7(0x12f)]<0x1){alert(_0x3917f7(0xfe));return;}if(_0x4a20a7[0x0][_0x3917f7(0x12f)]<0x3){alert(_0x3917f7(0x107));return;}const _0xa6eb2=allStudents[_0x3917f7(0xf9)](_0x25c346=>{const _0x450370=_0x3917f7,_0x2c26d3=normalizeString(_0x25c346[_0x450370(0x12e)])['split'](/\s+/),_0x51c071=normalizeString(_0x2651cf)[_0x450370(0x103)](/\s+/);return _0x51c071[_0x450370(0x127)](_0x267a4c=>_0x2c26d3[_0x450370(0x12d)](_0x3d91ef=>_0x3d91ef['includes'](_0x267a4c)));}),_0x60956d=shuffleArray(_0xa6eb2);_0x60956d[_0x3917f7(0x12f)]===0x0?document['getElementById'](_0x3917f7(0x120))[_0x3917f7(0x126)]=_0x3917f7(0xfd):displayStudents(_0x60956d,'filteredResults'),document[_0x3917f7(0x13a)](_0x3917f7(0x125))[_0x3917f7(0x126)]='',document[_0x3917f7(0x13a)](_0x3917f7(0x109))[_0x3917f7(0x126)]='';}function clearFilters(){const _0x107973=a0_0x26773a;document['getElementById']('filterName')[_0x107973(0x11d)]='',document[_0x107973(0x13a)](_0x107973(0x120))[_0x107973(0x126)]='',showTop3ByGender(allStudents);}loadStudents(),window['addEventListener'](a0_0x26773a(0xf8),()=>{const _0x2ce928=a0_0x26773a,_0x23cc1e=document[_0x2ce928(0x13a)]('filterName');_0x23cc1e&&_0x23cc1e[_0x2ce928(0x121)](_0x2ce928(0x112),function(_0x2cd4e9){const _0x5e714c=_0x2ce928;_0x2cd4e9[_0x5e714c(0xf2)]==='Enter'&&(_0x2cd4e9['preventDefault'](),applyFilters());});});